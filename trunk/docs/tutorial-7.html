<html>
<head>
  <title>Gosu - Tutorial</title>
  <link rel="stylesheet" type="text/css" href="gosu.css" />
  <script type="text/javascript" language="Javascript" src="tutorial.js"></script>
</head>

<body class="rightSide" onLoad="showLang('cpp')">

<h1>Sound Effects</h1>

<a href="javaScript:showLang('cpp')">show C++ version</a> - <a href="javaScript:showLang('ruby')">show Ruby version</a>

<h2>Needed Headers</h2>
<div class="cpp"><p><pre>
#include &lt;Gosu/AutoLink.hpp&gt;
#include &lt;Gosu/AutoLinkMain.hpp&gt;
#include &lt;Gosu/Audio.hpp&gt;
#include &lt;Gosu/Bitmap.hpp&gt;
#include &lt;Gosu/Color.hpp&gt;
#include &lt;Gosu/Directories.hpp&gt;
#include &lt;Gosu/Font.hpp&gt;
#include &lt;Gosu/Image.hpp&gt;
#include &lt;Gosu/Input.hpp&gt;
#include &lt;Gosu/IO.hpp&gt;
#include &lt;Gosu/Math.hpp&gt;
#include &lt;Gosu/Text.hpp&gt;
#include &lt;Gosu/Timing.hpp&gt;
#include &lt;Gosu/Window.hpp&gt;
#include &lt;boost/lexical_cast.hpp&gt;
#include &lt;boost/scoped_ptr.hpp&gt;
#include &lt;boost/shared_ptr.hpp&gt;
#include &lt;cmath&gt;
#include &lt;cstdlib&gt;
#include &lt;list&gt;
#include &lt;vector&gt;
</pre></p></div>

<h2>Loading Samples</h2>

<div class="cpp"><p>
  Loading samples (as short sound effects are called in Gosu) is the same as loading images, but without an intermediate step. Sample files are simply opened and then used to create a Sample object. Like images need a reference to a Gosu::Graphics object in their constructor, samples need on to a Gosu::Audio object.
</p></div>

<div class="ruby"><p>
  Loading samples (as short sound effects are called in Gosu) is exactly the same as loading an image.
</p></div>

<p>
  We'll give responsibility for loading and playing the sound effect for collecting stars to the Player class:
</p>

<div class="cpp"><p><pre>
class Player
{
    boost::scoped_ptr&lt;Gosu::Image&gt; image;
    <strong>boost::scoped_ptr&lt;Gosu::Sample&gt; beep;</strong>
    double posX, posY, velX, velY, angle;

public:
    Player(Gosu::Graphics&amp; graphics, <strong>Gosu::Audio&amp; audio</strong>)
    {
        Gosu::Buffer starfighterFile;
        Gosu::loadFile(starfighterFile, Gosu::sharedResourcePrefix() + L"media/Starfighter.bmp");
        Gosu::Bitmap bitmap;
        Gosu::loadFromBMP(bitmap, starfighterFile.frontReader());
        Gosu::applyColorKey(bitmap, Gosu::Colors::fuchsia);
        image.reset(new Gosu::Image(graphics, bitmap));

        <strong>Gosu::Buffer beepFile;
        Gosu::loadFile(beepFile, Gosu::sharedResourcePrefix() + L"media/Beep.wav");
        beep.reset(new Gosu::Sample(audio, beepFile.frontReader()));</strong>

        posX = posY = velX = velY = angle = 0;
    }
    ...
};

class GameWindow {
...
public:
    GameWindow()
    : Window(640, 480, false, 20),
        font(graphics(), Gosu::defaultFontName(), 20),
        <strong>player(graphics(), audio())</strong>
    {
...
</pre></p></div>

<div class="ruby"><p><pre>
class Player
  def initialize(window)
    @image = Gosu::Image.new(window, "media/Starfighter.bmp", false)
    @beep = Gosu::Sample.new(window, "media/Beep.wav")
    @x = @y = @vel_x = @vel_y = @angle = 0.0
  end
  ...
end
</pre></p></div>

<h2>Playing Samples</h2>
<p>
  Playing samples is even easier than loading them. Of course, this is the simplest form:
</p>
<div class="cpp"><p><pre>
    void collectStars(std::list&lt;Star&gt;&amp; stars, unsigned&amp; score)
    {
        ...
            if (dist &lt; 35)
            {
                cur = stars.erase(cur);
                score += 10;
                beep->play();
            }
        ...
    }
</pre></p></div>
<div class="ruby"><p><pre>
  def collect_stars(stars)
    ...
      if dist &lt; 35 then
        yield 10
        @beep.play
        true
      else
    ...
  end
</pre></p></div>
<p>
  You can also use playPan/play_pan to add stereo effects, or play's two defaulted arguments to change the speed and volume of the sound effect. As usual, only the reference will show you all the possibilities.
</p>

<h2>And now...</h2>
<p>
  ...have fun with Gosu!
</p>

</body>
</html>